jQuery(document).ready(function(a){sce=a.simplecommentediting=a.fn.simplecommentediting=function(){return this.each(function(){var e=a(this).find("a:first").attr("href"),b=wpAjax.unserialize(e),c=this;a(c).on("click","a",function(d){d.preventDefault();a("#sce-edit-comment-status"+b.cid).removeClass().addClass("sce-status").css("display","none");a(c).fadeOut("fast",function(){a(c).siblings(".sce-textarea").find("button").prop("disabled",!1);a(c).siblings(".sce-textarea").fadeIn("fast",function(){a(c).siblings(".sce-textarea").find("textarea").focus()})})});
a(c).siblings(".sce-textarea").on("click",".sce-comment-cancel",function(d){d.preventDefault();a(c).siblings(".sce-textarea").fadeOut("fast",function(){a(c).fadeIn("fast");a("#sce-edit-comment"+b.cid+" textarea").val(sce.textareas[b.cid])})});a(c).siblings(".sce-textarea").on("click",".sce-comment-save",function(d){d.preventDefault();a(c).siblings(".sce-textarea").find("button").prop("disabled",!0);a(c).siblings(".sce-textarea").fadeOut("fast",function(){a(c).siblings(".sce-loading").fadeIn("fast");
var d=a(c).siblings(".sce-textarea").find("textarea").val(),f=a.trim(d);"I am God"==d&&"object"==typeof console&&console.log("Isn't God perfect?  Why the need to edit?");""==f&&1==simple_comment_editing.allow_delete?confirm(simple_comment_editing.confirm_delete)?(a(c).siblings(".sce-textarea").off(),a(c).off(),a(c).parent().remove(),a.post(e,{action:"sce_delete_comment",comment_id:b.cid,post_id:b.pid,nonce:b._wpnonce},function(c){a("#sce-edit-comment-status"+b.cid).removeClass().addClass("sce-status updated").html(simple_comment_editing.comment_deleted).show();
setTimeout(function(){a("#comment-"+b.cid).slideUp()},5E3)},"json")):(a("#sce-edit-comment"+b.cid+" textarea").val(sce.textareas[b.cid]),a(c).siblings(".sce-loading").fadeOut("fast",function(){a(c).fadeIn("fast")})):a.post(e,{action:"sce_save_comment",comment_content:f,comment_id:b.cid,post_id:b.pid,nonce:b._wpnonce},function(d){a(c).siblings(".sce-loading").fadeOut("fast",function(){a(c).fadeIn("fast",function(){d.errors?(1==d.remove&&(a(c).siblings(".sce-textarea").off(),a(c).off(),a(c).parent().remove()),
a("#sce-edit-comment-status"+b.cid).removeClass().addClass("sce-status error").html(d.error).show()):(a("#sce-comment"+b.cid).html(d.comment_text),sce.textareas[b.cid]=a("#sce-edit-comment"+b.cid+" textarea").val())})})},"json")})});a.post(e,{action:"sce_get_time_left",comment_id:b.cid,post_id:b.pid},function(b){var e=parseInt(b.minutes),f=parseInt(b.seconds),g=sce.get_timer_text(e,f);b.can_edit?(a(c).find(".sce-timer").html(g),a(c).show(400,function(){a(c).trigger("sce.timer.loaded",c)}),sce.textareas[b.comment_id]=
a("#sce-edit-comment"+b.comment_id+" textarea").val(),sce.timers[b.comment_id]={minutes:e,seconds:f,timer:setInterval(function(){timer_seconds=sce.timers[b.comment_id].seconds-1;timer_minutes=sce.timers[b.comment_id].minutes;0>=timer_minutes&&0>=timer_seconds?(clearInterval(sce.timers[b.comment_id].timer),a(c).siblings(".sce-textarea").off(),a(c).off(),a(c).parent().remove()):(0>timer_seconds&&(--timer_minutes,timer_seconds=59),a(c).find(".sce-timer").html(sce.get_timer_text(timer_minutes,timer_seconds)),
sce.timers[b.comment_id].seconds=timer_seconds,sce.timers[b.comment_id].minutes=timer_minutes)},1E3)}):(a(c).siblings(".sce-textarea").off(),a(c).off(),a(c).parent().remove())},"json")})};sce.get_timer_text=function(a,b){0>b&&(--a,b=59);var c="&nbsp;&ndash;&nbsp;";1<=a&&(c+=a+" "+simple_comment_editing.timer.minutes[a],0<b&&(c+=" "+simple_comment_editing.and+" "));0<b&&(c+=b+" "+simple_comment_editing.timer.seconds[b]);return c};sce.timers=[];sce.textareas=[];a(".sce-edit-button").simplecommentediting();
a(".sce-edit-button").on("sce.timer.loaded",SCE_comment_scroll)});function SCE_comment_scroll(a,e){var b=""+window.location;/(#[^-]*\-[^&]*)/.test(b)&&(b=jQuery(""+window.location.hash),b=b.offset().top,jQuery("html,body").animate({scrollTop:b},1E3))}function SCE_comments_updated(){jQuery(".sce-edit-button").simplecommentediting()};